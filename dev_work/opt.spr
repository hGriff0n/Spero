mod opt
use std:io:println as puts

def Option[T] = Some(T) | None {
    def get = () -> self.match {
        Some(v) -> v
    }

    def or_else = (e :: T) ->
        self.match {
            Some(v) -> v
            None -> e
        }

    def new = () -> None
    def new = (T) -> .Some
}

def main = () -> {
    let val = Some(3)
    let tst = None

    "{}".puts(val.get)
    "{}".puts(tst.or_else(3))
}